NAS-KONV
========
Copyright (C) 2012 Luiko Czub MIT Lizenz

About
-----
NAS-KONV is a collection of examples, how informations could be extracted out of NAS files, using XSLT scripts. NAS is a GML3 exchange format, used by the german cadastral agencies for ALKIS®.

Ziel / Aufgabe NAS-KONV
-----------------------
Bereitstellung von Beispielskripten, wie Informationen aus NAS Dateien mittels XSLT extrahiert und in andere Formate konvertiert werden können. NAS ist das GML3 Austauschformat der deutschen Katasterbehörden für ALKIS®.

Aktuell unterstützte Ausgaben:

* Generierung von HTML Tabellen

Abhängigkeiten
---------------
Unterstützte GeoInfoDok: 6.0

NASCONV versucht, nur Elemente von XSLT 1.0 zu verwenden. Dadurch können diese Skripte direkt von den meisten Web Browsern (Firefox, IE, ...) mit ihrem integrierten XSLT 1.0 Parser verarbeitet werden.

Verwenden Skripte XSLT 2.0 Elemente, so ist dies im Kommentar der Dateien vermerkt. Für deren Konvertierung muss ein XSLT 2.0 konformer XSLT Parser (z.B. [Saxon-HE][]) zusätzlich installiert werden.

Da diese XSLT Parser die zu konvertierenden XML Dateien nicht zeilenweise verarbeiten, sondern vollständig laden, beschränkt die Größe des zur Verfügung stehenden Hauptspeichers die Größe der zu verarbeitenden NAS Dateien.

Installation
------------
Aktuelles Archiv mit den XML-Dateien und Unterverzeichnissen `xslt` und `data` auspacken.

* Das Hauptverzeichnis enthält die XML Dateien `xslt/nasconv_THEMA.xml` und die Verzeichnisse `xslt` und `data`
* Das Verzeichnis `xslt` enthält die XSLT Skripte `xslt/nasconv_THEMA.xsl` 
* Das Verzeichnis `data` ist bis auf eine README Datei leer.

Für Tests mit den offiziellen NAS Testdateien der Länder diese von den Web-Seiten der Katasterbehörden herunterladen, auspacken und im Unterverzeichnis `data` die  NAS Testdateien ablegen.

* Eine Liste der bekannten Quellen findet sich in `data\README`

Sollen eigene NAS Dateien konvertiert werden, diese im Unterverzeichnis `data` einstellen und in den XML Dateien einen entsprechenden Eintrag <nas_file> analog zu den Beispielen der NAS Testdateien erzeugen.

Anleitung
----------
Die ausgelieferten XML Dateien `nasconv_THEMA.xml` bestehen aus einer Referenz auf das entsprechende XSLT 1.0 Skript `xslt/nasconv_THEMA.xsl` und einer Liste von zu verarbeitenden NAS Testdateien, die im Unterverzeichnis `data` gesucht werden. 

Die XSLT 1.0 Konvertierung dieser NAS Dateien wird gestartet durch Laden der entsprechende XML Datei `nasconv_THEMA.xml` in einem Web Browser (Firefox, IE, ...). Der Browser wird nach dem Öffnen der XML Datei zuerst in einen "Busy" Zustand wechseln, während er die NAS Dateien liest und die XSLT Skripte anwendet. Nach einiger Zeit sollte sich dann eine HTML Seite mit den gewünschten Informationen öffnen.

Alternativ können diese XSLT 1.0 Konvertierungen über einen externen XSLT Parser angestossen und in eine HTML Datei ausgegeben werden. Beispiel Aufruf Saxon-HE: 

    java net.sf.saxon.Transform -s:nasconv_flurstuecke.xml -a -o:nasconv_flurstuecke.html
  

Soll eine XSLT 2.0 Konvertierungen angewendet werden, muss ein externer XSLT 2.0 Parser verwendet werden. Hierbei ist es nicht notwendig eine neue Datei `nasconv_THEMA.xml` zu definieren, da dass zu verwendende XSLT 2.0 Skript auch separat angegeben werden kann. Beispiel Aufruf Saxon-HE: ::

    java net.sf.saxon.Transform -s:nasconv_flurstuecke.xml -xsl:xslt/nasconv_flurstuecke-gruppiert.xsl -o:nasconv_flurstuecke-gruppiert.html


#### Aktuell bereitgestellte XSLT 1.0 Konvertierungen ####

* nasconv_aufnahmepunkte:
  Liste der AX_Aufnahmepunkt und ihnen zugeordneter AX_PunktortAU Datensätze
* nasconv_flurstuecke:
  Liste der AX_Flurstück und ihnen zugeordneter AX_Buchungsblatt und AX_Person Datensätze
  
#### Aktuell bereitgestellte XSLT 2.0 Konvertierungen ####

* nasconv_flurstuecke_gruppiert:
  Liste der AX_Flurstück und ihnen zugeordneter AX_Buchungsblatt und AX_Person Datensätze, gruppiert nach Gemarkung - Flur in separaten Tabellen.

weiterführende fachliche Informationen
--------------------------------------

Eine Einführung in XSLT findet sich auf [W3Schools Online Web Tutorial][] im [XSLT Tutorial][] .

Eine Beschreibung der NAS Strukturen finden sich auf [Adv Online - Aktuelle Dokumente der GeoInfoDok][] im ZIP-Archiv [NAS_6.0.1.zip][] . Das Unterverzeichnis `NAS_6.0.1\definitions\` enthält zu jedem Datensatz und Datentyp des NAS Formates eine XMl Datei, die mit einem Web Browser geöffnet eine lesbare Beschreibung präsentiert und über Links die Navigation zu verknüpften Datensatzbeschreibungen erlaubt.
  
Beteiligte
----------
Luiko Czub: Autor
Verbesserungen , Korrekturen , Fehlermeldungen, Anregungen sind willkommen und können unter im [Sourceforge Projekt NAS-KONV][] eingestellt werden.

Lizenz
------
Copyright (C) 2012  Luiko Czub
Diese Skripte sind freie Software. Sie können es unter den Bedingungen der MIT License (MIT), wie von der Open Source Initiative veröffentlicht, weitergeben und/oder modifizieren.
Die Veröffentlichung dieser Skripte erfolgt in der Hoffnung, daß es Ihnen von Nutzen sein wird, aber OHNE IRGENDEINE GARANTIE, sogar ohne die implizite Garantie der MARKTREIFE oder der VERWENDBARKEIT FÜR EINEN BESTIMMTEN ZWECK. Details finden Sie in der MIT License (MIT).
Sie sollten ein Exemplar der MIT License zusammen mit diesem Programm erhalten 
haben. Falls nicht, siehe <http://opensource.org/licenses/MIT>.

[W3Schools Online Web Tutorial]: http://www.w3schools.com
[XSLT Tutorial]: http://www.w3schools.com/xsl/default.asp
[Sourceforge Projekt NAS-KONV]: https://sourceforge.net/p/naskonv
[Adv Online - Aktuelle Dokumente der GeoInfoDok]: http://www.adv-online.de/icc/extdeu/broker.jsp?uMen=4b370024-769d-8801-e1f3-351ec0023010
[NAS_6.0.1.zip]: http://www.adv-online.de/icc/extdeu/binarywriterservlet?imgUid=70425220-0746-2210-3ca0-c0608a438ad1&uBasVariant=11111111-1111-1111-1111-111111111111
